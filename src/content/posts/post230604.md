---
title: 'MySQL 技巧'
pubDate: 2023-06-04 12:00:00
description: 'MySQL 算是在数据库领域最知名的一个产品了吧，性能好而且还免费开源，最近我也刚好在复习 MySQL 相关的知识，也刚好有点手痒想写点东西，就聊一聊 MySQL 吧'
author: 'CafeKiller'
image:
    url: ''
    alt: ''
tags: ["MySQL"]
class: '技术'
draft: true
---


# 索引

是一种用于快速查询和检索数据的数据结构，其本质可以看成是一种排序好的数据结构。

索引的作用就相当于一本书的目录。像一本新华字典，我们在查字典的时候，如果没有目录，那我们就只能一页一页的去找我们需要查的那个字，速度很慢。但是有目录了，我们只需要先去目录里查找字的位置，然后直接翻到那一页就行了。

索引底层数据结构有很多种类型：`B 树`、`B+ 树`、`Hash 树`、`红黑树`。MySQL 中的存储引擎

B+ 树是大多数 MySQL 存储引擎的默认索引类型。因为不再需要进行全表扫描，只需要对树进行搜索即可，因此查找速度快很多。除了用于查找，还可以用于排序和分组。可以指定多个列作为索引列，多个索引列共同组成键。适用于全键值、键值范围和键前缀查找，其中键前缀查找只适用于最左前缀查找。如果不是按照索引列的顺序进行查找，则无法使用索引。

InnoDB 的 B+Tree 索引分为主索引和辅助索引。主索引的叶子节点 data 域记录着完整的数据记录，这种索引方式被称为聚簇索引。因为无法把数据行存放在两个不同的地方，所以一个表只能有一个聚簇索引。辅助索引的叶子节点的 data 域记录着主键的值，因此在使用辅助索引进行查找时，需要先查找到主键值，然后再到主索引中进行查找。

> InnoDB 存储引擎有一个特殊的功能叫 「自适应哈希索引」，当某个索引值被使用的非常频繁时，会在 B+Tree 索引之上再创建一个哈希索引，这样就让 B+Tree 索引具有哈希索引的一些优点，比如快速的哈希查找。
>
> 哈希索引能以 O(1) 时间进行查找，但是失去了有序性。它有两个限制：无法用于排序与分组；只支持精确查找，无法用于部分查找和范围查找。





