---
import '../styles/global.min.css'

type tagType = {
    tag: string
    count: number
}

const allPosts: Array<any> = await Astro.glob('../pages/posts/*.md')

const uniqueTags: Array<string> = [...new Set(allPosts.map((post) => post.frontmatter.tags).flat())]

const fillterTags: Array<tagType> =  uniqueTags.map((tag) => {    
    const filteredPosts = allPosts.filter((post) => post.frontmatter.tags.includes(tag))
    return {
        tag:  tag ,
        count: filteredPosts.length,
    }
})
---

<footer class="footer-wrapper">
    <div class="footer-cont">
        <nav class="tags">
            <div class="title">标签</div>
            {
                fillterTags.map((item) => {
                    return ( 
                        <a href="javascript:alert('敬请期待')" class="item"> 
                            { item.tag } <span>({ item.count })</span> 
                        </a> )
                })
            }
        </nav>
    </div>
</footer>

<style>
    .footer-wrapper {
        margin-top: 80px;
        width: 100%;
        background-color: #fff;
        box-shadow: 0 1px 7px rgba(0, 0, 0, .3);
    }
    .footer-cont {
        padding: 40px 0 60px;
        margin: 0 auto 0;
        max-width: 886px;
		min-width: 766px;
    }
    .tags {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
    }
    .tags .title {
        margin-bottom: 10px;
        font-size: 24px;
        line-height: 42px;
        width: 100%;
        text-align: center;
    }
    .tags .item {
        margin: 0 6px;
        padding: 4px 12px;
        font-size: 14px;
        color: var(--black3);
        border: 1px solid var(--blackc);
        transition: border .15s ease;
    }
    .tags .item span {
        color: var(--black9);
    }
    .tags .item:hover {
        border: 1px solid var(--main-color);
    }
</style>